javascript:(function(){if(document.getElementById('lex-pro'))return;const d=document.createElement('div');d.id='lex-pro';const getLinks=(sel)=>[...new Set(Array.from(document.querySelectorAll(sel)).map(a=>a.href).filter(h=>h&&h.startsWith('http')))];const getImgs=()=>[...new Set(Array.from(document.querySelectorAll('img[src]')).map(i=>i.src).filter(s=>s.startsWith('http')))];const getVideos=()=>[...new Set(Array.from(document.querySelectorAll('video[src],video source[src]')).map(v=>v.src||v.querySelector('source')?.src).filter(s=>s&&s.startsWith('http')))];const types={all:{sel:'a[href]',fn:getLinks,icon:'ğŸ”—'},images:{sel:'a[href*=".jpg" i],a[href*=".jpeg" i],a[href*=".png" i],a[href*=".gif" i],a[href*=".webp" i],a[href*=".svg" i]',fn:getLinks,icon:'ğŸ–¼ï¸'},imgSrc:{sel:null,fn:getImgs,icon:'ğŸ“¸',label:'Image Sources'},docs:{sel:'a[href*=".pdf" i],a[href*=".doc" i],a[href*=".xls" i],a[href*=".ppt" i],a[href*=".txt" i],a[href*=".zip" i],a[href*=".csv" i]',fn:getLinks,icon:'ğŸ“„'},videos:{sel:'a[href*=".mp4" i],a[href*=".webm" i],a[href*="youtube.com"],a[href*="youtu.be"],a[href*="vimeo.com"]',fn:getLinks,icon:'ğŸ¥'},videoSrc:{sel:null,fn:getVideos,icon:'ğŸ“¹',label:'Video Sources'},social:{sel:'a[href*="facebook.com"],a[href*="twitter.com"],a[href*="x.com"],a[href*="instagram.com"],a[href*="linkedin.com"],a[href*="tiktok.com"],a[href*="reddit.com"]',fn:getLinks,icon:'ğŸ‘¥'},external:{sel:'a[href^="http"]',fn:(s)=>getLinks(s).filter(h=>!h.includes(location.hostname)),icon:'ğŸŒ'},mailto:{sel:'a[href^="mailto:"]',fn:(s)=>Array.from(document.querySelectorAll(s)).map(a=>a.href.replace('mailto:','')),icon:'ğŸ“§'},scripts:{sel:'script[src]',fn:()=>[...new Set(Array.from(document.querySelectorAll('script[src]')).map(s=>s.src))],icon:'âš™ï¸'},css:{sel:'link[rel="stylesheet"]',fn:()=>[...new Set(Array.from(document.querySelectorAll('link[rel="stylesheet"]')).map(l=>l.href))],icon:'ğŸ¨'}};let cache={};const getData=(k)=>{if(!cache[k]){const t=types[k];cache[k]=t.sel?t.fn(t.sel):t.fn()}return cache[k]};let filter='',format='lines';const render=()=>{const btns=Object.entries(types).map(([n,t])=>{const c=getData(n).length;return `<button data-type="${n}" ${c===0?'disabled':''} style="padding:8px 12px;background:${c===0?'#2a2a2a':'#3a3a3a'};color:${c===0?'#666':'#e0e0e0'};border:1px solid #444;border-radius:4px;cursor:${c===0?'default':'pointer'};text-align:left;font-size:12px;transition:all 0.15s;font-family:monospace;display:flex;justify-content:space-between;align-items:center" ${c>0?'onmouseover="this.style.background=\'#4a4a4a\'" onmouseout="this.style.background=\'#3a3a3a\'"':''}><span>${t.icon} <strong>${t.label||n.toUpperCase()}</strong></span><span style="color:#888;font-size:11px">${c}</span></button>`}).join('');d.innerHTML=`<div style="position:fixed;top:10px;right:10px;background:#1e1e1e;padding:16px;border-radius:8px;box-shadow:0 8px 32px rgba(0,0,0,0.4);z-index:2147483647;font-family:'Segoe UI',system-ui,sans-serif;width:280px;border:1px solid #333;color:#e0e0e0"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px"><h3 style="margin:0;font-size:14px;color:#fff;font-weight:600">âš¡ Link Extractor Pro</h3><button id="lex-close" style="background:none;border:none;color:#888;cursor:pointer;font-size:18px;padding:0;line-height:1" title="Close">Ã—</button></div><div style="margin-bottom:10px;display:flex;gap:6px"><input id="lex-filter" type="text" placeholder="Filter URLs..." value="${filter}" style="flex:1;padding:6px 8px;background:#2a2a2a;border:1px solid #444;border-radius:4px;color:#e0e0e0;font-size:11px;font-family:monospace"><select id="lex-format" style="padding:6px;background:#2a2a2a;border:1px solid #444;border-radius:4px;color:#e0e0e0;font-size:11px;cursor:pointer"><option value="lines" ${format==='lines'?'selected':''}>Lines</option><option value="comma" ${format==='comma'?'selected':''}>Comma</option><option value="json" ${format==='json'?'selected':''}>JSON</option><option value="markdown" ${format==='markdown'?'selected':''}>Markdown</option></select></div><div style="display:grid;gap:6px;max-height:400px;overflow-y:auto">${btns}</div><div style="margin-top:10px;display:flex;gap:6px;font-size:11px"><button id="lex-preview" style="flex:1;padding:6px;background:#2a2a2a;color:#888;border:1px solid #444;border-radius:4px;cursor:pointer">ğŸ‘ï¸ Preview</button><button id="lex-download" style="flex:1;padding:6px;background:#2a2a2a;color:#888;border:1px solid #444;border-radius:4px;cursor:pointer">ğŸ’¾ Download</button><button id="lex-refresh" style="padding:6px 10px;background:#2a2a2a;color:#888;border:1px solid #444;border-radius:4px;cursor:pointer" title="Refresh counts">ğŸ”„</button></div></div>`;document.body.appendChild(d);const fmt=(arr)=>{let filtered=arr;if(filter)filtered=arr.filter(u=>u.toLowerCase().includes(filter.toLowerCase()));if(format==='comma')return filtered.join(', ');if(format==='json')return JSON.stringify(filtered,null,2);if(format==='markdown')return filtered.map(u=>`- ${u}`).join('\n');return filtered.join('\n')};d.querySelectorAll('[data-type]').forEach(b=>{b.onclick=()=>{const links=getData(b.dataset.type);if(links.length===0)return;const txt=fmt(links);navigator.clipboard.writeText(txt).then(()=>{const o=b.innerHTML;b.style.background='#1a472a';b.style.borderColor='#2d6a3e';setTimeout(()=>{const c=getData(b.dataset.type).length;b.innerHTML=b.innerHTML.replace(/\d+<\/span>$/,`${c}</span>`);b.style.background='#3a3a3a';b.style.borderColor='#444'},800)})}});let lastType='all';d.querySelectorAll('[data-type]').forEach(b=>b.addEventListener('click',()=>lastType=b.dataset.type));d.querySelector('#lex-preview').onclick=()=>{const links=getData(lastType);const w=window.open('','_blank','width=600,height=400');w.document.write(`<html><head><title>Link Preview</title><style>body{font-family:monospace;padding:20px;background:#1e1e1e;color:#e0e0e0}a{color:#4a9eff;display:block;margin:4px 0}</style></head><body><h3>${lastType.toUpperCase()} (${links.length})</h3>${fmt(links).split('\n').map(u=>format==='markdown'?u:`<a href="${u}" target="_blank">${u}</a>`).join('<br>')}</body></html>`)};d.querySelector('#lex-download').onclick=()=>{const links=getData(lastType);const blob=new Blob([fmt(links)],{type:'text/plain'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`${lastType}-links-${Date.now()}.txt`;a.click()};d.querySelector('#lex-refresh').onclick=()=>{cache={};render()};d.querySelector('#lex-filter').oninput=(e)=>{filter=e.target.value};d.querySelector('#lex-format').onchange=(e)=>{format=e.target.value};d.querySelector('#lex-close').onclick=()=>d.remove()};render()})();